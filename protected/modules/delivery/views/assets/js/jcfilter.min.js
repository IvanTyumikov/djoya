jQuery.fn.jcOnPageFilter=function(e){e=jQuery.extend({animateHideNShow:!1,focusOnLoad:!1,highlightColor:"#00E7C0",textColorForHighlights:"#000000",caseSensitive:!1,hideNegatives:!0,addClassElems:!1,addClassParent:!0,addClassSection:!1,parentSearchClass:"",parentSectionClass:"",parentLookupClass:"jcorgFilterTextParent",childBlockClass:"jcorgFilterTextChild"},e),jQuery.expr[":"].icontains=function(e,s,a){return jQuery(e).text().toUpperCase().indexOf(a[3].toUpperCase())>=0},e.focusOnLoad&&jQuery(this).focus();var s=/(<span.+?>)(.+?)(<\/span>)/g,a="g";return e.caseSensitive||(s=/(<span.+?>)(.+?)(<\/span>)/gi,a="gi"),this.each((function(){jQuery(this).keyup((function(t){if(t.which&&13==t.which||t.keyCode&&13==t.keyCode)return!1;{function r(){jQuery("."+e.parentLookupClass).closest("."+e.parentSectionClass).each((function(){var s=0,a=jQuery(this).closest("."+e.parentSectionClass).find("."+e.parentLookupClass).length;jQuery(this).find("."+e.parentLookupClass).each((function(){"none"==jQuery(this).css("display")&&++s})),s==a?e.animateHideNShow?jQuery(this).closest("."+e.parentSectionClass).fadeOut(100):jQuery(this).closest("."+e.parentSectionClass).hide():e.animateHideNShow?jQuery(this).closest("."+e.parentSectionClass).fadeIn(100):jQuery(this).closest("."+e.parentSectionClass).show()}))}var l=jQuery(this).val();if(l.length>0){e.hideNegatives&&(e.addClassElems&&jQuery("."+e.childBlockClass).removeClass("search-results"),e.addClassParent&&jQuery("."+e.parentLookupClass).removeClass("search-results"),e.addClassSection&&jQuery("."+e.parentSectionClass).removeClass("search-results"),e.animateHideNShow?""!=e.parentSearchClass?jQuery("."+e.parentSearchClass).find("."+e.parentLookupClass).stop(!0,!0).fadeOut("slow"):jQuery("."+e.parentLookupClass).stop(!0,!0).fadeOut("slow"):""!=e.parentSearchClass?jQuery("."+e.parentSearchClass).find("."+e.parentLookupClass).stop(!0,!0).hide():jQuery("."+e.parentLookupClass).stop(!0,!0).hide());var o="icontains";if(e.caseSensitive&&(o="contains"),""!=e.parentSearchClass)var n=jQuery("."+e.parentSearchClass).find("."+e.childBlockClass);else n=jQuery("."+e.childBlockClass);if(jQuery.each(n,(function(e,a){jQuery(a).html(jQuery(a).html().replace(new RegExp(s),"$2"))})),""!=e.parentSearchClass)var i=jQuery("."+e.parentSearchClass).find("."+e.childBlockClass+":"+o+"("+l+")");else i=jQuery("."+e.childBlockClass+":"+o+"("+l+")");jQuery.each(i,(function(s,t){e.hideNegatives&&(e.animateHideNShow?e.addClassElems?jQuery(t).addClass("search-results").closest("."+e.parentLookupClass).stop(!0,!0).fadeIn("slow"):jQuery(t).closest("."+e.parentLookupClass).stop(!0,!0).fadeIn("slow"):e.addClassElems?jQuery(t).addClass("search-results").closest("."+e.parentLookupClass).stop(!0,!0).show():jQuery(t).closest("."+e.parentLookupClass).stop(!0,!0).show()),e.addClassParent&&jQuery(t).closest("."+e.parentLookupClass).addClass("search-results"),e.addClassSection&&jQuery(t).closest("."+e.parentSectionClass).addClass("search-results");var r=jQuery(t).text();jQuery(t).html(r.replace(new RegExp(l,a),(function(s){return["<span style='background:"+e.highlightColor+";color:"+e.textColorForHighlights+"'>",s,"</span>"].join("")})))})),""!=e.parentSectionClass&&(e.animateHideNShow?setTimeout(r,1e3):r())}else{if(""!=e.parentSearchClass)n=jQuery("."+e.parentSearchClass).find("."+e.childBlockClass);else n=jQuery("."+e.childBlockClass);if(jQuery.each(n,(function(a,t){var r=jQuery(t).html().replace(new RegExp(s),"$2");e.addClassElems?jQuery(t).removeClass("search-results").html(r):jQuery(t).html(r),e.addClassParent&&jQuery(t).closest("."+e.parentLookupClass).removeClass("search-results"),e.addClassSection&&jQuery(t).closest("."+e.parentSectionClass).removeClass("search-results")})),e.hideNegatives){if(""!=e.parentSearchClass){if(""!=e.parentSectionClass)i=jQuery("."+e.parentSearchClass).find("."+e.parentSectionClass);var c=jQuery("."+e.parentSearchClass).find("."+e.parentLookupClass)}else{if(""!=e.parentSectionClass)i=jQuery("."+e.parentSectionClass);c=jQuery("."+e.parentLookupClass)}e.animateHideNShow?(""!=e.parentSectionClass&&i.stop(!0,!0).fadeIn("slow"),c.stop(!0,!0).fadeIn("slow")):(""!=e.parentSectionClass&&i.stop(!0,!0).show(),c.stop(!0,!0).show())}}}}))}))};